<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Crime in Chicago</title>
        <link rel="icon" type="image/x-icon" href="assets/img/icon2.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v5.15.3/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
        <script charset="utf-8" src="https://d3js.org/d3.v4.min.js"></script>
        <script charset="utf-8" src="https://cdnjs.cloudflare.com/ajax/libs/dimple/2.3.0/dimple.latest.min.js"></script>
        <script charset="utf-8" src="https://cdn.wordart.com/wordart.min.js" async defer></script>
        
    </head>
<body id="page-top">
<!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
            <div class="container">
                <a class="navbar-brand js-scroll-trigger" href="index.html">Group 18 Web Project</a>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#page-top">Home</a></li>
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#Intro">Intro</a></li>
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#map">Map</a></li>
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#charts">Charts</a></li>
                        <li class="nav-item"><a class="nav-link active js-scroll-trigger" href="about.html">Analysis</a></li>
                    </ul>
                </div>
            </div>
        </nav>
<!-- Masthead-->
<header class="masthead">
  <div class="container d-flex h-100 align-items-center">
    <div class="mx-auto text-center">
      <h1 class="mx-auto my-0 text-uppercase">Crime</h1>
      <h2 class="text-white-80 mx-auto mt-2 mb-5">A study about the change of crime rate in Chicago from 2010 - 2021.</h2>
      <a class="btn btn-primary js-scroll-trigger" href="#Intro">Get Started</a>
    </div>
  </div>
</header>
<!-- Projects-->
<a name="Intro1" style="display:block;height:80px;margin-top:-80px;"></a>    
<section class="projects-section" id="Intro">
  <div class="container">
    <div class="row align-items-center no-gutters mb-1 mb-lg-1">
      <div class="col-xl-4 col-lg-5">
        <div class="featured-text text-center text-lg-left">
          <h3 class="text-white-80">Intro</h3>
          <h5 class="text-white-80 mx-auto mt-3 mb-5">This map is designed to ...</h5>
        </div>
      </div>
    </div>
  </div>
  
  <div class="container">    
    <div style=" width: 1000px; height: 600px;" data-wordart-src="https://cdn.wordart.com/json/4cbxclzeo85e"></div>
  </div>
    
  <div class="container" style="height: auto">
    <div class="row align-items-center no-gutters mt-4 my-4">
      <div class="col-xl-4 col-lg-5">
        <div class="text-center text-lg-left">
          <h5 style="width: 1000px" class="text-white-80 mx-auto mt-3 mb-3">Nulla elementum sapien leo, eu blandit sem pellentesque ac. Fusce faucibus mauris lorem, nec maximus nibh placerat at. Cras volutpat mi lacus. Donec vel arcu viverra, ultricies ligula at, bibendum est. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Quisque posuere urna nisi. Praesent congue augue erat, ultrices faucibus tellus ultrices elementum.  </h5>
        </div>
      </div>
    </div>
  </div>
    
<a name="map1" style="display:block;height:100px;"></a> 
<a id="map" style="display:block;height:10px;"></a>       
<div class="container">
  <div class="row align-items-center no-gutters mb-1 mb-lg-1">
    <div class="col-xl-4 col-lg-5">
      <div class="featured-text text-center text-lg-left">
        <h3 class="text-white-80">Interactive map</h3>
        <h5 class="text-white-80 mx-auto mt-3 mb-5">This map is designed to ...</h5>
      </div>
    </div>
  </div>
</div>
    
  <div class="container">       
    <iframe class="embedded-map" src="map/crime_number.html" scrolling="no"></iframe>   
  </div> 
   
  <a name="charts1" style="display:block;height:100px;margin-top:-100px;"></a>
  <a id="charts" style="display:block;height:10px;"></a>       
  <div class="container" >
    <div class="row align-items-center no-gutters mb-4 mb-lg-5">
      <div class="col-xl-4 col-lg-5">
        <div class="featured-text text-center text-lg-left">
          <h3 class="text-white-80">Charts</h3>
          <h5 class="text-white-80 mx-auto mt-3 mb-1">These charts are ...</h5>
        </div>
      </div>
    </div>
  </div> 
   
  <div class="container">     
  <div id="chartContainer">
    <p id="charttitle">Crimes in Chicago 2010-2020</p>
    <p id="chartsubhead">Chart title is here</p>
    <p><select id="WardMenu">
    <option>Change Ward Here:</option>
    </select></p> <!-- This is the drop down menu to select different cities-->
  </div>
    </div>
    
  <script>
        d3.csv("assets/total.csv", function (CityData) {
            var chartdata;
            var cityMenu = document.getElementById("WardMenu");

            for (var i = 0; i < CityData.length; i++) {            // In this loop we add the names of all the Cities in the CSV to the drop down menu
                var el = document.createElement("option");
                el.textContent = "Ward " + CityData[i].ward;
                el.value = CityData[i].Index;
                cityMenu.appendChild(el);
            }

            function SetCityData(index) {   // Function that extracts the Total Crime timeseries for the selected city

                console.log(CityData[index]); // Show the data of the row in the console

                document.getElementById("chartsubhead").innerHTML = "The Chosen Ward is Ward " + CityData[index].ward;

                chartdata = [
                    {"Ward":"Hist","Year": "2010","Total Crime": (CityData[index].crime2010) },
                    {"Ward":"Hist","Year": "2011", "Total Crime": (CityData[index].crime2011) },
                    {"Ward":"Hist","Year": "2012", "Total Crime": (CityData[index].crime2012) },
                    {"Ward":"Hist","Year": "2013", "Total Crime": (CityData[index].crime2013) },
                    {"Ward":"Hist","Year": "2014", "Total Crime": (CityData[index].crime2014) },
                    {"Ward":"Hist","Year": "2015", "Total Crime": (CityData[index].crime2015) },
                    {"Ward":"Hist","Year": "2016", "Total Crime": (CityData[index].crime2016) },
                    {"Ward":"Hist","Year": "2017", "Total Crime": (CityData[index].crime2017) },
                    {"Ward":"Hist","Year": "2018", "Total Crime": (CityData[index].crime2018) },
                    {"Ward":"Hist","Year": "2019", "Total Crime": (CityData[index].crime2019) },
                    {"Ward":"Hist","Year": "2020", "Total Crime": (CityData[index].crime2020) }
                ];

            }

            SetCityData(0);

            var svg = dimple.newSvg("#chartContainer", 840, 440);
            var myChart = new dimple.chart(svg, chartdata);  // Create the chart
            myChart.setBounds(80, 25, 700, 300);            // Set the chart bounds within the svg container

            myChart.defaultColors = [
                new dimple.color("#54aae3"),
                new dimple.color("#54aae3")
            ];
            
            var x = myChart.addTimeAxis("x", "Year", "%Y", "%Y");  // Define the x axis. The latter statements define the date format which we want to be year only
            x.timeInterval = 1;
            x.fontSize='small'

            var y = myChart.addMeasureAxis("y", "Total Crime"); // Define the y axis
            y.ticks = 10;
            y.fontSize='small'
        

            var s = myChart.addSeries("Ward", dimple.plot.line);
            s.lineMarkers = true;
            s.interpolation = "cardinal";

            myChart.draw(500); // Draw the chart. The number is the animation delay in miliseconds

            document.getElementById("WardMenu").onchange = function () {    // This is the event listener that runs when the user changes the menu
                var x = document.getElementById("WardMenu").value;
                console.log(x);

                SetCityData(x);   // Run the function that will update chartdata with the user selected city

                svg.selectAll(".dimple-marker,.dimple-marker-back").remove(); // There's a bug where it doesn't remove the markers from the previous series. 

                myChart.data = chartdata; // Update the chart with the new chartdata
                myChart.draw(500);
            }
        })
    </script>  

<div class="container" id="charts">
  <div class="row align-items-center no-gutters mb-4 mb-lg-5">
    <div class="col-xl-4 col-lg-5">
      <div class="text-center text-lg-left">
        <h5 style="width: 800px" class="text-white-80 mx-auto mt-3 mb-1">Next, the changes in the number of various crime types are displayed below.</h5>
      </div>
    </div>
  </div>
</div> 
    
<div class="container">       
  <iframe class="embedded-chart" src="chart/piechart3.html" scrolling="no"></iframe>   
</div>    
    
</section>    
<!-- Footer-->
<footer class="footer bg-black small text-center text-white-50">
  <div class="container">
    <p>Credit : Theme modified from <a href="https://getbootstrap.com/docs/5.0/examples/">Bootstrap</a></p>
    <p>Copyright &copy; Centre for Advanced Spatial Analysis, University College London 2021</p>  
  </div>
</footer>       
<!-- Bootstrap core JS-->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script> 
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- Third party plugin JS-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
<!-- Core theme JS-->
<script src="js/scripts.js"></script>
</body>
</html>
